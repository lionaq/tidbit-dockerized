{% extends 'base.html' %}

{% block title %}Profile{% endblock %}

{% block content %}
<main>
  <!-- Section: White bg -->
  <section>
    <div class="container">

      <!-- ProfilePic and CoverPic -->
      <section>
        <div class="d-flex justify-content-center cover-pic-container rounded-bottom">
          <img 
            src="{{ current_user.coverpic }}" 
            class="cover-pic" 
          />
        </div>
        <div class="d-flex justify-content-center">
          <img 
            src="{{ current_user.profilepic }}" 
            class="profile-pic rounded-circle" 
            />
        </div>
      </section>

      <!-- User Data -->
      <section>
        <div class="justify-content-center text-center" style="margin-top: 68px;">
          <h5>{{ current_user.fullname }}</h5>
          <p class="small text-muted">@{{ current_user.username }}</p>
          <p class="small py-3">{{ current_user.bio }}</p>
        </div>

        <div class="text-center"> 
          {% if current_user.website %} 
            <p class="small"> 
              <a href="{{ current_user.website }}" target="_blank" style="text-decoration: none; color: darkblue">{{ current_user.website }}</a> 
            </p> 
          {% endif %}
        </div>

        <div class="d-flex justify-content-center text-center">
          <a href="">
              <div class="d-flex px-3 py-3">
                  <h6 class="px-2" id="userFollowers">100</h6>
                  <h6 class="small text-muted">Followers</h6>
              </div>
          </a>
          <a href="">
              <div class="d-flex px-3 py-3">
                  <h6 class="px-2" id="userFollowing">100</h6>
                  <h6 class="small text-muted">Following</h6>
              </div>
          </a>
        </div>
      </section>

      <!-- Navbar: Posts, Liked, and Saved -->
      <div>
        <nav class="nav justify-content-center">
          <a href="{{ url_for('profile_bp.profile', username=current_user.username) }}" class="nav-link">Posts</a>
          <a href="" class="nav-link">Liked</a>
          <a href="" class="nav-link">Saved</a>
        </nav>
      </div>

      <!-- User Posts Gallery -->
      <div class="img-container">
        <div class="row">
          {% for post in posts %}
            <div class="col-lg-3 col-md-6 mb-4">
              <div class="image-container">
                {% for cont in content %}
                {% if cont.id == post.id and loop.index0 == 0: %}
                <a href="">
                  <img src="{{ cont.url }}" class="rounded gallery-image" alt="{{ post.title }}">
                </a>
                {% endif %}
                {% endfor %}
                <div class="image-overlay">
                  <a href="" class="overlay-link">
                    <i class="fa-solid fa-pen-to-square" id="editPost"></i>
                  </a>
                  <a href="" class="overlay-link">
                    <i class="fa-solid fa-trash" id="deletePost"></i>
                  </a>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>

      <!-- Create post icon -->
      <a href="">
        <div class="floating-icon">
            <i class="fa-solid fa-plus"></i>
        </div>
      </a>
    </div>
  </section>
</main>

<body>
  <script>
  var path = window.location.pathname;

  var links = document.querySelectorAll('.nav a');
  for (var i = 0; i < links.length; i++) {
    if (links[i].getAttribute('href') === path) {
      links[i].classList.add('active');
    }
  }
  </script>
</body>

{% endblock %}